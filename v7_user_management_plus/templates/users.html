# templates/users.html
{% extends "base.html" %}
{% block title %}Users List{% endblock %}

{% block content %}
<h1>Users List</h1>

<form method="get" action="{{ url_for('users.users_html') }}">
    <input type="text" name="q" value="{{ request.args.get('q','') }}" placeholder="Search username">
    <button type="submit">Search</button>
</form>

<table border="1" cellpadding="5" cellspacing="0">
    <thead>
        <tr>
            <th>Username</th>
            <th>Age</th>
            <th>Role</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
    {% for username, user in users.items() %}
        <tr>
            <td>{{ username }}</td>
            <td>{{ user['age'] }}</td>
            <td>{{ user['role'] }}</td>
            <td>
                <a href="{{ url_for('users.profile', username=username) }}">Profile</a>
                {% if session.get('role') in ['admin','editor'] %}
                    | <a href="{{ url_for('users.edit_user', username=username) }}">Edit</a>
                {% endif %}
                {% if session.get('role') == 'admin' %}
                    | <a href="{{ url_for('users.delete_user', username=username) }}">Delete</a>
                {% endif %}
            </td>
        </tr>
    {% else %}
        <tr>
            <td colspan="4">No users found.</td>
        </tr>
    {% endfor %}
    </tbody>
</table>

{% if session.get('role') == 'admin' %}
<p><a href="{{ url_for('users.create_user_form') }}">Create New User</a></p>
{% endif %}

{% endblock %}

