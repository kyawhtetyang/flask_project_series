{% extends "base.html" %}
{% block title %}Users{% endblock %}
{% block content %}
<h1>Users</h1>
<table border="1" cellpadding="5">
    <tr>
        <th>Username</th>
        <th>Age</th>
        {% if session.get('role') == 'admin' %}
        <th>Actions</th>
        {% endif %}
    </tr>
    {% for username, user in users.items() %}
    <tr>
        <td>{{ username }}</td>
        <td>{{ user['age'] }}</td>
        {% if session.get('role') == 'admin' %}
        <td>
            <a href="{{ url_for('users.edit_user', username=username) }}">Edit</a> |
            <a href="{{ url_for('users.delete_user', username=username) }}">Delete</a>
        </td>
        {% endif %}
    </tr>
    {% endfor %}
</table>

{% if session.get('role') == 'admin' %}
<p><a href="{{ url_for('users.create_user_form') }}">Create User</a></p>
{% endif %}

<p><a href="{{ url_for('auth.login') }}">Login</a></p>
{% endblock %}
